# 执行上下文、作用域、作用域链、变量对象的链

## 几个理解

### 1. 一段JS代码（eg:一个JS文件）只对应一个作用域链吗？

  答：每一段JavaScript代码（全局或函数）都有一个与之关联的作用域链

### 2. 作用域链是什么，我们能通过代码调用输出到控制台，看到它吗?

  答：不能，作用域链（scope chain）是变量作用域的一种解读方式，是一个抽象的概念。其作用是方便理解，并不是一个真实存在的。在《JavaScript权威指南》犀牛书中的原话是这样的：
> 如果将一个局部变量看做是自定义实现的对象的属性的话，那么可以换个角度来解读变量作用域。每一段JavaScript代码（全局代码或者函数）都有一个与之关联的作用域链（scope chain）。这个作用域链式一个对象列表或者链表，这组对象定义了这段代码“作用域中”的遍历。

### 3. 作用域链的作用是什么，是如何工作的？


### 作用域链

```js
    let a = 20;
    const b = 30;
    var c;

    function multiply(e. f) {
        var g = 20;
        return e * f * g;
    }

    c = multiply(20, 30);
```

执行上下文：

``` JS

    GlobalExectionContext = {

        ThisBinding: <Global object>,

        LexicalEnvironment: {
            EnvironmentRecord: {
                Type: "Object",
                // 这里绑定标识符
                a: <uninitialized>,
                b: <uninitialized>,
                multiply: <func>
            },
            outer: <null>
        },

        VariableEnvironment: {
            EnvironmentRecord: {
                Type: "Object",
                // 在这里绑定标识符
                c: undefined,
            },
            outer: <null>
        }
    }

    FunctionExectionContext = {

        ThisBinding: <Global Object>,

        LexicalEnvironment: {
            EnvironmentRecord: {
                Type: "Declararive",
                // 这里绑定标识符
                Arguments: {0: 20, 1:30, length: 2}
            },
            outer: <GlobalLexicalEnvironment>
        },

        VariableEnvironment: {
            EnvironmentRecord: {
                Type: "Declarative",
                // 在这里绑定标识符
                g: undefined
            },
            outer: <GlobalLexicalEnviron>
        }
    }
```


```js

    function fun03() {
        var a = 10;
        return function(){
            a*= 2 ;
            return a ;
        };
    }

    var f = fun03();
    f();
    var x = f();
    console.log(x);  //40

    var g = fun03();
    var y = g();
    console.log(y); //20

```

## reference

[Javascript 进阶 作用域 作用域链](https://blog.csdn.net/lmj623565791/article/details/25076713)
[深入理解JavaScript执行上下文、函数堆栈、提升的概念](https://segmentfault.com/a/1190000009041008)