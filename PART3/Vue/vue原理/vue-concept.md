# Vue原理解析 & 简单的双向绑定MVVM

## 几种常见的监听模式

> 发布者-订阅者模式 （backbone.js）  

> 脏值检查 （angular.js）  

> 数据劫持 （vue.js） 

## 数据劫持


## 一 双向数据绑定

### 1.1 什么是双向数据绑定

就是数据的双向互通，即：

1. 页面数据改变 => js中 data值中的改变
2. js中 data值的改变 => 页面数据改变

从定义上了解它之后，我们就一步一步去完成它。

### 1.2 怎么去做

step1:
---
首先我要有能监听到两个变化的函数，
1. 页面的变化，无非是输入和点击，那么我们可以使用`addEventListener`去完成。
2. data值的变化，可以采用不同的方式，Angular（脏数据检测），本文以Vue的实现`Object.defineProperty()`来说明。这个api可以监听到对象中每个属性的改变操作，并自定义回调函数。

OK 能够监听到变化之后，我们就需要做第二部操作，写回调函数


step2:
---
再次明确一下我们的需求。  
> 我们在js中定义了一个变量，这个变量可能在页面<spann style="color:red; font-size:20px">多处</spann>引用。当在js中改变这个变量时，要求页面的这些引用同步更新；而且当在页面中对某个引用做修改时（比如input框输入），对应的js文件中的变量也同步修改，页面中这个变量的其他引用也完成修改。

这里放一张图 用于说明，互相修改时需要做的操作。

在清楚每个变化之后的回调之后，我们就要设计去实现它.

step3
---
我们需要一些特殊的表示，在html中去表示，它是和js的变量有绑定关系的。在vue中我们用的是`{{}}`和`v-`的方式。最终呈献给用户的其实是将他们编译后的代码。所以我就需要一个compile文件来完成这些工作。主要的工作还是将这些符号里的值赋值给
