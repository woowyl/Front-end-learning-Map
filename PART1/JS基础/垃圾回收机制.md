## Javascript的垃圾回收

### 什么是垃圾回收
> 找出不再使用的变量，然后释放掉其占用的内存，但是这个过程不是时时的，因为其开销比较大，所以垃圾回收器会按照固定的时间间隔周期性的执行。

### 为什么要垃圾回收
程序的运行需要内存。只要程序提出要求，操作系统或者运行时（runtime）就必须供给内存。

机器的内存是有限的。

对于持续运行的服务进程（daemon），必须及时释放不再用到的内存。否则，内存占用越来越高，轻则影响系统性能，重则导致进程崩溃。

        这里区分两个概念：
            - 内存泄漏 Memory Leak
            - 内存溢出 Out of Memory

        *内存泄漏*  
        内存泄漏是申请的空间没有及时释放或者干脆丢了指针没法释放.不是泄漏,是漏不出来;只是泄漏的内存远小于可分配的内存时影响不大,多了就玩完.

        *内存溢出*   
        申请的内存超过了可用内存,内存不够用了

不再用到的内存，没有及时释放，就叫做内存泄漏（memory leak）。
有些语言（比如 C 语言）必须手动释放内存，程序员负责内存管理。
这很麻烦，所以大多数语言提供自动内存管理，减轻程序员的负担，这被称为"垃圾回收机制"（garbage collector）。

JavaScript就是采用了自动垃圾回收机制。

### 如何进行垃圾回收

#### 垃圾回收的方式
    那么javascript是如何知道，是否要将这块内存回收呢？
    主要有两种形式：
    - 引用计数
    - 标记清除

“引用计数”:语言引擎有一张"引用表"，保存了内存里面所有的资源（通常是各种值）的引用次数。如果一个值的引用次数是0，就表示这个值不再用到了，因此可以将这块内存释放。
```javascript 
    var a = {p: 1};   //对象{p:1}，以下简称obj,第1次引用
    var b = a;        //obj 第2次引用

    a = null;         // obj引用1次
    b = null;         // obj 应用0次 可以被释放


    var c = [1,2,3,4];
    console.log('数组[1,2,3,4]被引用1次');
    //尽管后面的代码没有用到 c 但是因为有1次引用，所以[1,2,3,4]所占用的内存不会被释放

    // 如果解除对数组的引用，则这块内存将会被释放
    c = null; // c = 1;

    //另外一种是循环引用，如果使用引用计数则会发生永远无法释放的问题
    function test() {
        var a = {a:1};
        var b = {b:1};
    }

```
因此，并不是说有了垃圾回收机制，程序员就轻松了。你还是需要关注内存占用：那些很占空间的值，一旦不再用到，你必须检查是否还存在对它们的引用。如果是的话，就必须手动解除引用。

#### 垃圾回收的频率



