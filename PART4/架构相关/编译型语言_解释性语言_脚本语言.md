### 我们的IDE里代码是如何让机器认识的？

我们知道机器最后识别的都是机器码，也就是我们说的010101二进制码。 学名机器语言指令，有时也被称为原生码（Native Code），是电脑的CPU可直接解读的数据。  

但是直接去写01代码，对人的要求实在太高，所以就有代码大神发明了高级语言，通过固定规则定义一些逻辑，我们只需按照规则写完自己的代码，然后通过一个方法把它变成机器翻译认识的机器码。  

那么按照这个说法是不是所有高级语言，除了直接写机器码的语言外，需要翻译的语言都是编译型语言呢？
答案是否定的，这里需要明白两个概念：

### 一、编译型语言和解释型语言

 1. #### 编译型语言
    程序在执行之前需要一个专门的编译过程，把程序编译成 为机器语言的文件，运行时不需要重新翻译，直接使用编译的结果就行了。程序执行效率高，依赖编译器，跨平台性差些。如C、C++、Delphi等. 程序在执行之前需要一个专门的编译过程，把程序编译成 为机器语言的文件，运行时不需要重新翻译，直接使用编译的结果就行了。程序执行效率高，依赖编译器，跨平台性差些。如C、C++、Delphi等.

 2. #### 解释型语言
    程序不需要编译，程序在运行时才翻译成机器语言，每执 行一次都要翻译一次。因此效率比较低。比如Basic，JavaScript语言，专门有一个解释器能够直接执行Basic程序，每个语句都是执行的时候才翻译。

可以明显的看出， 一个是编译，一个是解释。两种方式只是翻译的时间不同。  
 
编译时一下子翻译完，然后让cpu去读，而解释是边翻译边读，两者同时进行。  

通俗的说，就像日常翻译一本书，“编译”是把一整本书全部翻译好，你读的时候直接读翻译好的文字，而解释就像是同声翻译，你什么时候读就什么时候翻译，读到哪里就翻译到哪里。

所以两者的区别也就来了

||优点|不足|代表语言|
|-|-|-|-|
|编译型|一次翻译好，运行时不需要翻译，执行效率高|执行前已翻译完成，跨平台性差，因为不同的平台（Windows,Unix,Linux）对应的机器码是不同的|C  C++|
|解释型|运行时翻译，可根据不同的平台翻译成对应的机器码，跨平台性好（就像是拿到一本中文书，我可以根据读者的语言翻译成其能听得懂得语言）|由于需要一边执行一边翻译,效率会稍差一点|Java,JavaScript,Python,PHP|


可能有同学会发现，Java和JavaScript都属于解释性语言，这和我们日常的认知不太一样啊，Java不应该是由编译过程的吗？

在编程中，通常有两种翻译方法将代码翻译成机器语言。你可以使用解释器或者编译器。

使用解释器，翻译的过程基本上是一行一行及时生效的。

![](./images/bianyi/wasm1.png)

编译器是另外一种工作方式，它在执行前翻译。

![](./images/bianyi/wasm2.png)

每种翻译方法都有利弊。

#### 解释器的利弊
解释器很快的获取代码并且执行。您不需要在您可以执行代码的时候知道全部的编译步骤。因此，解释器感觉与 JavaScript 有着自然的契合。web 开发者能够立即得到反馈很重要。

这也是浏览器最开始使用 JavaScript 解释器的原因之一。

但是使用解释器的弊端是当您运行相同的代码的时候。比如，您执行了一个循环。然后您就会一遍又一遍的做同样的事情。

#### 编译器的利弊
编译器则有相反的效果。在程序开始的时候，它可能需要稍微多一点的时间来了解整个编译的步骤。但是当运行一个循环的时候他会更快，因为他不需要重复的去翻译每一次循环里的代码。

因为解释器必须在每次循环访问时不断重新转换代码，作为一个可以摆脱解释器低效率的方法，浏览器开始将编译器引入。

不同的浏览器实现起来稍有不同，但是基本目的是相同的。他们给 JavaScript 引擎添加了一个新的部分，称为监视器（也称为分析器）。该监视器在 JavaScript 运行时监控代码，并记录代码片段运行的次数以及使用了那些数据类型。

如果相同的代码行运行了几次，这段代码被标记为 “warm”。如果运行次数比较多，就被标记为 “hot”。
被标记为 “warm” 的代码被扔给基础编译器，只能提升一点点的速度。被标记为 “hot” 的代码被扔给优化编译器，速度提升的更多。

![](./images/bianyi/wasm3.png)

了解更多，可以读 https://hacks.mozilla.org/2017/02/a-crash-course-in-just-in-time-jit-compilers/

为了要理解编译型语言和解释性语言，我们还需要区分这两个概念了：

### 二、解释型语言和脚本语言
   
脚本语言： 脚本语言是为了缩短传统的编写-编译-链接-运行（edit-compile-link-run）过程而创建的计算机编程语言。它的命名起源于一个脚本“screenplay”，每次运行都会使对话框逐字重复。早期的脚本语言经常被称为批量处理语言或工作控制语言。

可以理解的是脚本语言不仅仅是在执行时翻译，而且它前期也没有编译操作。举个例子，
Java和JavaScript  
我们编写的Java代码会事前编译成为.class文件，然后.class文件会在JVM上解释为机器语言，也就是在执行前做了一次编译操作，但是并未将代码编译为机器码，需要再解释操作。  
而javascript解释的更彻底一些。他把编译和解释操作都放在了执行过程中，所以有种即写即用的感觉，更加便捷，随着解释器性能的不断提高和强大，JavaScript火起来可以说是在情理之中。
      

综上，解释性分为脚本语言和非脚本语言，他们的差异在于是否在执行解释前需要编译操作。


### 三、最终的理解

1. #### 大类区分
![](./images/bianyi/category.png)

2. #### 执行过程中的图

![](./images/bianyi/producer.png)


编译型语言的优点是执行速度快、对硬件要求低、保密性好，适合开发操作系统、大型应用程序、数据库等。

脚本语言的优点是使用灵活、部署容易、跨平台性好，非常适合Web开发以及小工具的制作。
### 四、Reference
[什么是“脚本语言”](http://www.yinwang.org/blog-cn/2013/03/29/scripting-language)

https://www.zhihu.com/question/19608553
[图说 WebAssembly](https://www.zcfy.cc/article/an-abridged-cartoon-introduction-to-webassembly-ndash-smashing-magazine)

































